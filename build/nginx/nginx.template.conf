server {
    listen ${OPENWISP_DASHBOARD_LISTEN_PORT};
    location /static/ {
        alias /opt/openwisp/static/dashboard/;
    }
    location / {
        try_files $uri @wsgi;
    }
    location @wsgi {
        include uwsgi_params;
        uwsgi_pass dashboard:${DASHBOARD_APP_PORT};
    }
}

server {
    listen ${OPENWISP_CONTROLLER_LISTEN_PORT};
    location /static/ {
        alias /opt/openwisp/static/controller/;
    }
    location / {
        try_files $uri @wsgi;
    }
    location @wsgi {
        include uwsgi_params;
        uwsgi_pass controller:${CONTROLLER_APP_PORT};
    }
}

server {
    listen ${OPENWISP_RADIUS_LISTEN_PORT};
    location /static/ {
        alias /opt/openwisp/static/radius/;
    }
    location / {
        try_files $uri @wsgi;
    }
    location @wsgi {
        include uwsgi_params;
        uwsgi_pass radius:${RADIUS_APP_PORT};
    }
}

server {
    listen ${OPENWISP_TOPOLOGY_LISTEN_PORT};
    location /static/ {
        alias /opt/openwisp/static/topology/;
    }
    location / {
        try_files $uri @wsgi;
    }
    location @wsgi {
        include uwsgi_params;
        uwsgi_pass topology:${TOPOLOGY_APP_PORT};
    }
}
